{"mappings":"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","sources":["public/js/index.js","public/js/login.js","public/js/updateSetting.js","public/js/stripe.js"],"sourcesContent":["import { logIn, logOut } from \"./login.js\";\r\nimport { upDateFoms } from \"./updateSetting.js\";\r\nimport { booking } from \"./stripe.js\";\r\n// logIn();\r\nconst LogOut = document.querySelector(\".nav__el-logout\");\r\n// if ()\r\nconst bookingTour = document.getElementById(\"booking--tour\");\r\nif (bookingTour) {\r\n  bookingTour.addEventListener(\"click\", function (e) {\r\n    booking(e.target.dataset.venueId);\r\n  });\r\n}\r\nexport const hideAlert = () => {\r\n  const error = document.querySelector(\".alert\");\r\n  if (error) error.parentElement.removeChild(error);\r\n  console.log(error);\r\n};\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markUp = `<div class=alert alert--${type}>${msg}</div>`;\r\n  console.log(\r\n    document.querySelector(\".body\"),\r\n    document.querySelector(\".header\")\r\n  );\r\n  document.querySelector(\".header\").insertAdjacentHTML(\"afterbegin\", markUp);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\nconst form = document.querySelector(\".form\");\r\nconst logout = document.querySelector(\".nav__el-logout\");\r\nconst updateForm = document.querySelector(\".form-user-data\");\r\nconst updatePasswordForm = document.querySelector(\".form-user-settings\");\r\nconsole.log(form);\r\nif (updatePasswordForm) {\r\n  updatePasswordForm.addEventListener(\"submit\", function (e) {\r\n    e.preventDefault();\r\n    const passwordCurrent = document.getElementById(\"password-current\");\r\n    const passwordNew = document.getElementById(\"password\");\r\n    const passwordConfirm = document.getElementById(\"password-confirm\");\r\n    upDateFoms(\r\n      {\r\n        passwordCurrent: passwordCurrent.value,\r\n        passwordNew: passwordNew.value,\r\n        passwordConfirm: passwordConfirm.value,\r\n      },\r\n      \"password\"\r\n    );\r\n  });\r\n  passwordConfirm.value = \"\";\r\n  passwordNew.value = \"\";\r\n  passwordCurrent.value = \"\";\r\n}\r\nif (form) {\r\n  form.addEventListener(\"submit\", function (e) {\r\n    e.preventDefault();\r\n\r\n    const email = document.getElementById(\"email\").value;\r\n    const password = document.getElementById(\"password\").value;\r\n\r\n    logIn({ email, password });\r\n    console.log(email, password);\r\n    document.getElementById(\"email\").value = \"\";\r\n    document.getElementById(\"password\").value = \"\";\r\n  });\r\n}\r\nconsole.log(LogOut);\r\nif (LogOut) {\r\n  LogOut.addEventListener(\"click\", function (e) {\r\n    logOut();\r\n  });\r\n}\r\nif (updateForm) {\r\n  updateForm.addEventListener(\"submit\", function () {\r\n    const upLoad = new FormData();\r\n    upLoad.append(\"name\", document.getElementById(\"name\").value);\r\n    upLoad.append(\"email\", document.getElementById(\"email\").value);\r\n    upLoad.append(\"photo\", document.getElementById(\"photo\").files[0]);\r\n    upDateFoms(upLoad, \"\");\r\n  });\r\n}\r\n","// import axios from \"axios\";\r\nexport const hideAlert = () => {\r\n  const error = document.querySelector(\".alert\");\r\n  if (error) error.parentElement.removeChild(error);\r\n  console.log(error);\r\n};\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markUp = `<div class=alert alert--${type}>${msg}</div>`;\r\n  console.log(\r\n    document.querySelector(\".body\"),\r\n    document.querySelector(\".header\")\r\n  );\r\n  document.querySelector(\".header\").insertAdjacentHTML(\"afterbegin\", markUp);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n\r\nexport const logIn = async function (val) {\r\n  try {\r\n    const data = await fetch(\"http://127.0.0.1:2000/api/v1/user/login\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(val),\r\n    });\r\n    const res = await data.json();\r\n    // if ()\r\n    console.log(data, res);\r\n    if (res.status === \"success\") {\r\n      showAlert(\"succesfuly\", \"you have been logged in\");\r\n      window.setTimeout(() => {\r\n        location.assign(\"/\");\r\n      }, 5000);\r\n    } else {\r\n      showAlert(\"error\", res.message);\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    showAlert(\"error\", \"its not successful\");\r\n  }\r\n};\r\n// export default logIn;\r\nexport const logOut = async () => {\r\n  try {\r\n    const data = await fetch(\"http://127.0.0.1:2000/api/v1/user/logout\");\r\n    const res = await data.json();\r\n    if (res.status === \"success\") {\r\n      showAlert(\"success\", \"You have logged out successfully\");\r\n      window.setTimeout(() => {\r\n        location.assign(\"/login\");\r\n      }, 5000);\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n","export const hideAlert = () => {\r\n  const error = document.querySelector(\".alert\");\r\n  if (error) error.parentElement.removeChild(error);\r\n  console.log(error);\r\n};\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markUp = `<div class=alert alert--${type}>${msg}</div>`;\r\n  console.log(\r\n    document.querySelector(\".body\"),\r\n    document.querySelector(\".header\")\r\n  );\r\n  document.querySelector(\".header\").insertAdjacentHTML(\"afterbegin\", markUp);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\nexport const upDateFoms = async (val, url) => {\r\n  console.log(val);\r\n  try {\r\n    const address =\r\n      url === \"password\"\r\n        ? \"http://127.0.0.1:2000/api/v1/user/updatePassword\"\r\n        : \"http://127.0.0.1:2000/api/v1/user/updateUser\";\r\n    const data = await fetch(address, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      data: JSON.stringify(val),\r\n    });\r\n    const res = await data.json();\r\n    if (res.status === \"success\") {\r\n      showAlert(\"success\", \"Data has been updated succesfully\");\r\n    }\r\n  } catch (err) {\r\n    showAlert(\"error\", \"network failure\");\r\n  }\r\n};\r\n","const pubLicKey =\r\n  \"pk_test_51MAk3lBjyYuT7Rfw1XOPlsvqLnbmvGXWn43pRNFmaa1GKyZEAT9PTtvxmtkngbg1040oSZ8oXgKTEpL2eGP3ysQp00yccipvFx\";\r\nconst stripe = Stripe(pubLicKey);\r\nexport const booking = async (id) => {\r\n  try {\r\n    const session = await axios({\r\n      method: \"POST\",\r\n      data: {\r\n        id: id,\r\n      },\r\n      url: `http://127.0.0.1:2000/api/v1/bookings/create-checkout-session`,\r\n    });\r\n    console.log(session);\r\n    // await stripe.directToCheckout({\r\n    //   session: session.data.session.id,\r\n    // });\r\n    // window.location.replace(session.data.session.url);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n"],"names":[],"version":3,"file":"app.js.map","sourceRoot":"/"}